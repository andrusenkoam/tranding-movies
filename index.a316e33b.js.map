{"mappings":"AAAA,MAGMA,EAAiBC,SAASC,cAAc,YACxCC,EAASF,SAASC,cAAc,aAEtC,IAAIE,EAAc,EAOdC,EAAW,IAAIC,sBAkCnB,SAAgBC,EAASC,GACvBD,EAAQE,SAAQC,IACVA,EAAMC,iBACRP,GAAe,EACfQ,EAAYR,GACTS,MAAKC,IACJd,EAAee,mBACb,YACAC,EAAaF,EAAKG,UAEhBH,EAAKI,OAASJ,EAAKK,aACrBX,EAASY,UAAUjB,EAAO,IAG7BkB,OAAMC,GAAOC,QAAQC,IAAIF,K,MAtDpB,CACZG,KAAM,KACNC,WAAY,QACZC,UAAW,IAYb,SAASf,EAAYM,EAAO,GAC1B,OAAOU,MAAM,iGAAkDV,KAAQL,MACrEgB,IACE,IAAKA,EAAKC,GACR,MAAM,IAAIC,MAAMF,EAAKG,YAGvB,OAAOH,EAAKI,MAAM,G,CAKxB,SAASjB,EAAakB,GACpB,OAAOA,EACJC,KAAI,EAACC,MAAEA,EAAKC,YAAEA,KACN,wEACuCA,WAAqBD,qEAE3CA,wCAIzBE,KAAK,G,CA7BV1B,IACGC,MAAKC,IACJd,EAAee,mBAAmB,YAAaC,EAAaF,EAAKG,UACjEZ,EAASkC,QAAQpC,EAAO,IAEzBkB,OAAMC,GAAOC,QAAQC,IAAIF","sources":["src/index.js"],"sourcesContent":["const BASE_URL = 'https://api.themoviedb.org/3/';\nconst ENDPOINT = 'trending/movie/day';\nconst API_KEY = '14d14d317e7936ec61c7763e22ff83f6';\nconst trendingListEl = document.querySelector('.js-list');\nconst target = document.querySelector('.js-guard');\n\nlet currentPage = 1;\nlet options = {\n  root: null,\n  rootMargin: '200px',\n  threshold: 1.0,\n};\n\nlet observer = new IntersectionObserver(onLoad, options);\n\ngetTrending()\n  .then(data => {\n    trendingListEl.insertAdjacentHTML('beforeend', createMarkup(data.results));\n    observer.observe(target);\n  })\n  .catch(err => console.log(err));\n\nfunction getTrending(page = 1) {\n  return fetch(`${BASE_URL}${ENDPOINT}?api_key=${API_KEY}&page=${page}`).then(\n    resp => {\n      if (!resp.ok) {\n        throw new Error(resp.statusText);\n      }\n\n      return resp.json();\n    }\n  );\n}\n\nfunction createMarkup(arr) {\n  return arr\n    .map(({ title, poster_path }) => {\n      return `<li class=\"item\">\n        <img src=\"https://image.tmdb.org/t/p/w500/${poster_path}\" alt=\"${title}\">\n        <div class=\"info-wrap\">\n          <h2 class=\"title\">${title}</h2>\n        </div>\n      </li>`;\n    })\n    .join('');\n}\n\nfunction onLoad(entries, observer) {\n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      currentPage += 1;\n      getTrending(currentPage)\n        .then(data => {\n          trendingListEl.insertAdjacentHTML(\n            'beforeend',\n            createMarkup(data.results)\n          );\n          if (data.page === data.total_pages) {\n            observer.unobserve(target);\n          }\n        })\n        .catch(err => console.log(err));\n    }\n  });\n}\n"],"names":["$1f0dc3b9307be026$var$trendingListEl","document","querySelector","$1f0dc3b9307be026$var$target","$1f0dc3b9307be026$var$currentPage","$1f0dc3b9307be026$var$observer","IntersectionObserver","entries","observer1","forEach","entry","isIntersecting","$1f0dc3b9307be026$var$getTrending","then","data","insertAdjacentHTML","$1f0dc3b9307be026$var$createMarkup","results","page","total_pages","unobserve","catch","err","console","log","root","rootMargin","threshold","fetch","resp","ok","Error","statusText","json","arr","map","title","poster_path","join","observe"],"version":3,"file":"index.a316e33b.js.map"}